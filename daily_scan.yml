name: Daily Stock Scan & Sheet Sync

on:
  schedule:
    # èªªæ˜ï¼šGitHub ä½¿ç”¨ UTC æ™‚é–“
    # UTC 10:45 = å°ç£æ™‚é–“ 18:45 (é€±ä¸€è‡³é€±äº”)
    - cron: '45 10 * * 1-5'
    
  workflow_dispatch: # ä¿ç•™æ‰‹å‹•åŸ·è¡ŒæŒ‰éˆ•

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Check out code
      uses: actions/checkout@v3
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    # --- è«‹å¾é€™è£¡é–‹å§‹è¤‡è£½è¦†è“‹ ---
    - name: Install and Run
      run: |
        echo "â³ é–‹å§‹å®‰è£å¥—ä»¶..."
        python -m pip install --upgrade pip
        pip install pandas numpy yfinance matplotlib
        
        echo "ğŸ“‹ æª¢æŸ¥å¥—ä»¶æ¸…å–® (é™¤éŒ¯ç”¨)..."
        pip list | grep matplotlib
        
        echo "ğŸš€ åŸ·è¡Œæ—¥å ±ç¨‹å¼..."
        python daily_report.py
        
    - name: Run Daily Report
      env:
        EMAIL_SENDER: ${{ secrets.EMAIL_SENDER }}
        EMAIL_PASSWORD: ${{ secrets.EMAIL_PASSWORD }}
        EMAIL_RECEIVER: ${{ secrets.EMAIL_SENDER }}
      run: |
        python daily_report.py






